<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forest Health Predictor</title>
<style>
    /* Reset & base */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#F9FAFB; min-height:100vh; padding:20px; color:#374151; }
    .container { max-width:1400px; margin:0 auto; }

    /* Header */
    .header { text-align:center; margin-bottom:30px; }
    .header img { max-width:120px; margin-bottom:10px; }
    .header h1 { font-size:2.5em; color:#047857; margin-bottom:5px; }
    .header p { font-size:1em; color:#6b7280; }

    /* Status Bar */
    .status-bar { background:white; border-radius:10px; padding:15px; margin-bottom:20px; display:flex; justify-content:space-between; align-items:center; border:1px solid #e5e7eb; }
    .status-dot { width:12px; height:12px; border-radius:50%; display:inline-block; margin-right:8px; }
    .status-dot.online { background:#10b981; animation:pulse 2s infinite; }
    .status-dot.offline { background:#ef4444; animation:pulse 2s infinite; }
    @keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:0.5;} }

    /* Cards */
    .main-content { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:30px; }
    .card { background:white; border:1px solid #e5e7eb; border-radius:12px; padding:25px; transition:all 0.3s ease; }
    .card:hover { background:#F0FDF4; border-color:#10b981; }
    .card h2 { color:#047857; margin-bottom:20px; font-size:1.5em; border-bottom:1px solid #e5e7eb; padding-bottom:10px; }

    /* Inputs */
    .input-group { margin-bottom:15px; }
    .input-group label { display:block; margin-bottom:5px; font-weight:500; color:#374151; }
    .input-group input, .input-group select { width:100%; padding:10px; border:1px solid #d1d5db; border-radius:6px; transition:all 0.3s ease; }
    .input-group input:focus { border-color:#047857; outline:none; box-shadow:0 0 0 3px rgba(16,185,129,0.2); }

    .features-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:10px; max-height:300px; overflow-y:auto; padding:10px; background:#F9FAFB; border-radius:8px; }

    /* Buttons */
    .btn { padding:10px 20px; border:none; border-radius:8px; cursor:pointer; font-weight:600; transition:all 0.3s ease; }
    .btn-primary { background:#047857; color:white; }
    .btn-secondary { background:#6b7280; color:white; }
    .btn-success { background:#10b981; color:white; }
    .btn-warning { background:#f59e0b; color:white; }
    .btn:hover { opacity:0.9; transform:translateY(-2px); }

    .button-group { display:flex; gap:10px; margin-top:10px; }

    /* Results Section */
    .results-section { background:white; border:1px solid #e5e7eb; border-radius:12px; padding:25px; margin-bottom:30px; display:none; }
    .results-section h2 { color:#047857; }
    .prediction-result { border-left:4px solid #10b981; background:#f0fdf4; border-radius:6px; padding:15px; margin-bottom:15px; }
    .prediction-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
    .confidence-badge { background:#047857; color:white; padding:3px 10px; border-radius:15px; font-size:0.9em; }
    .probabilities { display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); gap:8px; }

    /* Alerts */
    .alert { padding:12px; border-radius:8px; margin-bottom:15px; display:none; }
    .alert.show { display:block; }
    .alert-success { background:#d1fae5; color:#065f46; border-left:4px solid #10b981; }
    .alert-error { background:#fee2e2; color:#991b1b; border-left:4px solid #ef4444; }
    .alert-info { background:#dbeafe; color:#1e40af; border-left:4px solid #3b82f6; }

    /* Loading Spinner */
    .spinner { border:4px solid #f3f3f3; border-top:4px solid #047857; border-radius:50%; width:36px; height:36px; animation:spin 1s linear infinite; margin:0 auto; }
    @keyframes spin { 0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }

    @media (max-width:768px) { .main-content { grid-template-columns:1fr; } .header h1 { font-size:1.8em; } }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo">

        <p> Forest Health Predictor : </p>
        <p>Syst√®me avanc√© de pr√©diction de sant√© foresti√®re</p>
    </div>

    <div class="status-bar">
        <div>
            <span class="status-dot offline" id="statusDot"></span>
            <span id="statusText">Connexion en cours...</span>
        </div>
        <div>
            <span id="modelInfo">Mod√®le: --</span>
        </div>
    </div>

    <div id="alertContainer"></div>

    <div class="main-content">
        <div class="card">
            <h2>üìù Pr√©diction Manuelle</h2>
            <div id="manualFeatures" class="features-grid">
                <div class="loading active"><div class="spinner"></div><p>Chargement des features...</p></div>
            </div>
            <div class="button-group">
                <button class="btn btn-warning" onclick="generateRandomValues()">üé≤ G√©n√©rer Valeurs</button>
                <button class="btn btn-primary" onclick="predictManual()">üîÆ Pr√©dire</button>
            </div>
        </div>

        <div class="card">
            <h2>üìÅ Upload de Fichier</h2>
            <div class="input-group">
                <label for="fileUpload">S√©lectionner un fichier (CSV, Excel, TXT)</label>
                <input type="file" id="fileUpload" accept=".csv,.xlsx,.xls,.txt">
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="downloadTemplate()">üì• T√©l√©charger Template</button>
                <button class="btn btn-primary" onclick="predictFile()">üìä Analyser Fichier</button>
            </div>
            <div id="fileInfo" style="margin-top: 10px; display: none;">
                <p style="color:#6b7280; font-size:14px;">
                    <strong>Fichier:</strong> <span id="fileName"></span><br>
                    <strong>Taille:</strong> <span id="fileSize"></span>
                </p>
            </div>
        </div>
    </div>

    <div class="results-section" id="resultsSection">
        <h2>üìà R√©sultats de Pr√©diction</h2>
        <div id="loadingResults" class="loading"><div class="spinner"></div><p>Traitement en cours...</p></div>
        <div id="predictionsContainer"></div>
        <div id="statisticsContainer"></div>
        <div id="recommendationsContainer"></div>
        <div class="button-group">
            <button class="btn btn-success" onclick="exportResults('csv')">üíæ Exporter CSV</button>
            <button class="btn btn-success" onclick="exportResults('json')">üìã Exporter JSON</button>
            <button class="btn btn-secondary" onclick="clearResults()">üóëÔ∏è Effacer</button>
        </div>
    </div>
</div>

</body>
</html>
